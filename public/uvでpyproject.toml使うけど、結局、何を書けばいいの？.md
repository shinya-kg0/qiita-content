---
title: uvでpyproject.toml使うけど、結局、何を書けばいいの？
tags:
  - 'Python'
  - 'uv'
  - 'toml'
private: false
updated_at: ''
id: null
organization_url_name: null
slide: false
ignorePublish: false
---
# はじめに

Pythonで開発をしていると、当たり前のように使っているパッケージ管理。
最近では、爆速ツールとして話題の`uv`を使い始めた方も多いのではないでしょうか？

私も最近、uvを使って環境管理をすることになり、
設定ファイルの`pyproject.toml`をいじることがありました。

「なんとなく、ここにライブラリ名を書くんだなというのは分かる。」
「でも、結局このファイルのどこが大事で、何を書けばいいの？」

という感じに、、、

普段はコマンド一発で動くので意識しなくても開発は進められますが、
以下のような場面では`pyproject.toml`の中身を理解しているとグッと楽になります。

- 「ライブラリを入れたはずなのに動かない！」というトラブルの解決
- 「本番環境にはこれ、開発ツールにはこれ」とスマートに使い分けたいとき
- 「チームメンバー全員と同じ環境を作りたい」と構成を整えるとき

この記事では、uvを使ってPython環境を管理する時に、**とりあえずこれだけ書いておけばOK！**という基本から、知っておくと便利な設定までをシンプルに解説します。

`toml`ファイルに馴染みがあって、uvでの`pyproject.toml`の書き方が知りたいという方は
`uvで環境を管理する時に何を書くべき？`まで飛ばしてもらって大丈夫です！


# .tomlファイルとは？

まずは`toml`形式について簡単に紹介します！

`yaml`, `json`などはよく見るけど、`toml`ってあんまり馴染みがなかったりしますよね、、、

なんだか難しそうに聞こえるかもしれませんが、
`toml`形式は**人間が読み書きしやすくするために生まれた、設定ファイル用の書き方**のことです。

正式名称は**Tom's Obvious Minimal Language**（トムさんの、明快で、最小限の言語）。名前に「明快（Obvious）」と入っている通り、パッと見て何が書いてあるか分かりやすいのが最大の特徴です。

## こんな形式のファイルです

見た方が早いので、具体例を紹介します。

```toml
# pyproject.toml
[project]
name = "my-app"
version = "0.1.0"
dependencies = [
    "requests",
    "pandas",
]
```

`[ ]`で囲まれたセクション（グループ名）があって、
その下に`名前 = 値`というルールで設定を並べていくスタイルです。


## どんな場面で使われる？

モダンな開発環境の中では、
プロジェクト設定の標準になりつつあるのではないでしょうか？

例えば、

- パッケージ管理: `uv`や`Poetry`などのツール設定
- ツールの設定: コードを綺麗にする`Ruff`や、テスト用の`pytest`の設定
- Rust言語: Rustの標準的なパッケージ管理（Cargo）

具体的なユースケースについては後ほど見ていきましょう。

## YAML, JSONとの違い

「設定ファイルなら、JSONやYAMLじゃダメなの？」と思うかもしれません。
それぞれの特徴を比較してみます。


| **形式** | **特徴** | **注意ポイント** |
| --- | --- | --- |
| **JSON** | プログラムが読みやすい | **コメントが書けない。** カンマ一つ忘れるだけでエラー。 |
| **YAML** | 見た目がスッキリしている | **インデント（空白）に命をかけている。** スペース1個のズレで設定が壊れる。 |
| **TOML** | **人間が読み書きしやすい** | 最初は `[ ]` の書き方に少し戸惑うかも。 |

- TOMLのいいところ
  1. コメントが書ける：「なぜこのライブラリを入れたか」をメモしておけます。
  2. インデントに厳しくない：スペースの数でプログラムが止まることはありません。
  3. 構造がはっきりしている：`[project]`や`[tool.uv]`のようにグループ分けされているので、どこに何を書くべきか迷いにくいです。

慣れてしまえば、快適な開発環境管理ができそうですね！


# pyproject.tomlの便利なユースケース

toml形式で管理されている設定ファイルは、他にもありますが
今回はPython環境の管理をする`pyproject.toml`に焦点を当てて見ていきます。

`pyproject.toml`は、ただライブラリをリストアップするだけのファイルではありません。
これ一つで**わずらわしかった環境管理をまとめてくれるまとめ役**です！

いくつかのユースケースを見ていきます。

## 1. uvでPython環境をまるごと管理する

これは今回メインで伝えたい内容です。

### これまでの悩み

- 「Pythonのバージョンを切り替えるには pyenv」
- 「仮想環境を作るには python -m venv」
- 「ライブラリを入れるには pip install」

……と、覚えるコマンドも使うツールもバラバラで、
「結局いまどの環境に何が入ってるの？」と混乱しがちでした。

### 解決されること

`pyproject.toml`に「使いたいPythonのバージョン」と「必要なライブラリ」を書いておくだけで、
uvがこれらすべてを自動で準備してくれます。

uvにもpipライクに環境を作れるのですが、
`pyproject.toml`で管理することで大きな恩恵が得られます。

`uv run`だけで環境構築が完了するのは魅力ですね！



## 2. テストツール（pytest）の設定

テストを実行するための`pytest`の設定も、`toml`に書くのが標準的です。

### これまでの悩み

「テストの時だけこのフォルダを無視したい」といった設定を、
コマンドを打つたびにオプションで指定するのは面倒で、ミスも起きやすいです。

### 解決されること

`[tool.pytest.ini_options]`にあらかじめ書いておけば、
次からは`pytest`と打つだけで、あなたのプロジェクト専用のルールでテストが走ります。


## 3. 自作スクリプトのショートカット作成

これが意外と知られていない、一番便利なポイントかもしれません。

### これまでの悩み

「このアプリを起動するには、この環境変数をセットして、このファイルを指定して……」という長いコマンドを、毎回メモ帳からコピペしていませんか？

### 解決されること

`[project.scripts]`やuvの機能を使えば、**自分専用の短いコマンド**を定義できます。
例えば、`uv run start`と打つだけで、複雑な起動処理を一瞬で実行できるようになります。



# uvで環境を管理する時に何を書くべき？

ここからが本題です。
実際にpyproject.tomlに何を書くべきかについて解説していきます！

「設定項目が多すぎて何から書けばいいかわからない！」
という人のために、重要度順に整理しました。

まずは【重要度：★★★】だけ押さえれば、今日からuvを使いこなせます。



- uvでPython環境を管理する時にtomlファイルに何を書けばいいか？

- よく使うセクションを具体的に解説

- あるあるの管理ファイルの具体例紹介