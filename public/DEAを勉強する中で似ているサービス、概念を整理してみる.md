---
title: 【試験前確認用】AWS DEA：似ているサービス、概念を比較して整理したい
tags:
  - 'AWS'
  - 'AWS Certified Data Engineer - Associate'
private: false
updated_at: ''
id: null
organization_url_name: null
slide: false
ignorePublish: false
---
# はじめに

[AWS Certified Data Engineer - Associate](https://aws.amazon.com/jp/certification/certified-data-engineer-associate/)を勉強し始めました。

AWS経験0からの勉強なので、サービスや似ている概念が多すぎて混乱中です。
ということで、似ているサービス、概念をまとめてみます。（自己学習用です。）

同じように勉強している方で、

- ふんわりとした理解しかできていない
- AとBのサービスどっちを選べばいいの？
- ユースケースが思いつかない

という方も比較表を見て、理解を深めていただければと思います。

各トピック独立して書いていくので
体系的にまとめているわけではないのでご了承ください。


# 各サービスの比較

## Step Functions vs MWAA vs Glue

ワークフロー関係のサービス

| サービス | 特徴・使いどころ |
| --- | --- |
| **Step Functions** | **AWSサービス間の連携**に最適。短時間、ステートレス、高信頼。JSONベース。 |
| **Amazon MWAA** | **データパイプライン全体**の管理に最適。Pythonで書きたい、外部SaaS（Slack等）とも連携したい、複雑な再実行制御をしたい場合。 |
| **AWS Glue (Workflows)** | **Glue中心のETL**のみを行う場合。シンプルだがAirflowほどの柔軟性はない。 |


## Step Functions vs Glue Workflows

| **比較項目** | **AWS Step Functions** | **AWS Glue Workflows** |
| --- | --- | --- |
| **主な用途** | **汎用的なビジネスロジックの自動化**。マイクロサービスの連携や複雑な条件分岐が必要な処理。 | **ETL（データ抽出・加工・書き出し）専用**。Glue ジョブやクローラを組み合わせたデータパイプライン。 |
| **連携できるサービス** | **200以上のAWSサービス**。Lambda, Batch, ECS, DynamoDB, SNS などほぼ全て。 | **Glue 関連のみ**（Glue Job, Crawler, Trigger）。 |
| **制御の柔軟性** | **非常に高い**。ループ、並列実行、高度な条件分岐（Choice）、エラー再試行、待機などが可能。 | **限定的**。基本は「成功・失敗・停止」によるトリガー制御。複雑なループなどは苦手。 |
| **実行期間** | 最大 **1年間**。 | 最大 **24時間**（Glue ジョブ自体の制限に依存）。 |
| **実装方法** | ASL (JSON/YAML) またはビジュアルエディタ。 | Glue コンソール、または Python（AWS SDK）/ Terraform 等。 |
| **料金体系** | ステート遷移数に応じた課金（Standard）またはリクエスト数（Express）。 | **無料**（ただし、実行される Glue ジョブやクローラの料金は別途発生）。 |

- Glueのみで完結できるかが判断基準
- 「特定の型のエラーが起きた時だけ 3回リトライし、それでもダメなら別の処理へ」などの複雑なフローやAWSの他のサービスと組みわせる必要があるならStep Functions


## GuardDuty vs Shield

セキュリティー関係のサービス

| 特徴 | Amazon GuardDuty | AWS Shield |
| --- | --- | --- |
| **主な目的** | **脅威検知**（異常な動きを見つける） | **DDoS 保護**（大量アクセスから守る） |
| **防御対象** | AWS アカウント、IAM、EC2、S3 など | ネットワーク、Webアプリケーション |
| **得意なこと** | 乗っ取り、マイニング、内部不正の検知 | 大規模なサーバーダウン攻撃の阻止 |
| **動作イメージ** | ログを分析して「怪しい」と知らせる | 攻撃を自動的に「受け流す・遮断する」 |
| **料金** | 分析したログ量に応じた従量課金 | Standard は無料（Advanced は定額） |


## EMR vs Glue

データ処理関係のサービス

| **特徴** | **Amazon EMR** | **AWS Glue** |
| --- | --- | --- |
| **管理の自由度** | **高い**（OSやソフトをいじれる） | **低い**（設定のみのサーバーレス） |
| **コスト最適化** | スポットインスタンス等で**安くできる** | DPUによる従量課金 |
| **得意なこと** | 自由度の高い分析、機械学習、大規模計算 | 定型的なデータの洗浄（ETL）、カタログ管理 |
| **使いやすさ** | インフラの知識が必要 | 専門知識が少なくても始めやすい |


## ALBとNLB

ロードバランサーのサービス

| 項目 | ALB (L7) | NLB (L4) |
| --- | --- | --- |
| **正式名称** | Application Load Balancer | Network Load Balancer |
| **動作レイヤー** | レイヤー7（アプリケーション層） | レイヤー4（トランスポート層） |
| **主なプロトコル** | HTTP, HTTPS, gRPC | TCP, UDP, TLS |
| **振り分けの判断基準** | URLのパス、ホスト名、HTTPヘッダーなど | IPアドレス、ポート番号 |
| **静的IPの固定** | 不可（DNS名で運用） | **可能**（Elastic IPを割り当て可能） |
| **パフォーマンス** | 普通（秒間数百万リクエストも可だが、スケーリングに数分かかる） | **超高速・超低遅延**（突発的な負荷にも即座に対応） |
| **主な用途** | Webサイト、マイクロサービス、API | ゲーム、動画配信、固定IPが必要な通信 |


## EFS vs EBS

ストレージ関係のサービス

| 機能 | Amazon EFS | Amazon EBS (Multi-Attach) |
| --- | --- | --- |
| **ストレージ種別** | ファイルストレージ (NFS) | ブロックストレージ (NVMe) |
| **共有台数** | 数千台 | 最大16台 |
| **AZまたぎ** | **可能** | **不可** (同一AZのみ) |
| **主な用途** | Webサーバのコンテンツ共有、ログ集約 | データベースのクラスタ構成 (RAC等) |
| **難易度** | 低い（OSでマウントするだけ） | 高い（書き込み制御の設計が必要） |

- EFSは共有することが前提
- EBSは1対1の外付けストレージ（共有はあまり考えない）


## S3 vs RDS vs DynamoDB vs Redshift

データストア関係のサービス

| **項目** | **S3** | **RDS** | **DynamoDB** | **Redshift** |
| --- | --- | --- | --- | --- |
| **役割** | オブジェクトストレージ | リレーショナルDB (RDB) | NoSQLデータベース | データウェアハウス (DWH) |
| **データの形式** | **何でも（非構造化）** | 行と列（構造化） | キーと値（半構造化） | 列方向（分析用構造化） |
| **主な用途** | 静的ファイル、データレイク | 業務アプリ、事務処理 | 高頻度な読み書き、IoT | 大規模データ分析、BI |
| **得意なこと** | データの長期・大量保管 | 複雑な検索や整合性管理 | 超高速な応答と拡張性 | 数億件規模の集計・分析 |
| **苦手なこと** | 頻繁なデータの一部更新 | 数テラ超の膨大な拡張 | 複雑な結合（JOIN）処理 | 1件ごとの頻繁な更新 |
| **操作言語** | API / HTTP | SQL | API (専用言語) | SQL (PostgreSQL互換) |
| **スケーリング** | 無制限（自動） | 垂直（上限あり） | 水平（ほぼ無制限） | 水平（クラスタ追加） |

# IAM

| **項目** | **概要** | **例え** | **主な用途** |
| --- | --- | --- | --- |
| **IAMユーザー** | AWSを利用する「人」 | 社員一人ひとり | 個人のログイン用 |
| **IAMグループ** | ユーザーの「集合体」 | 部署（開発部など） | 複数人に一括で権限を出す |
| **IAMポリシー** | 権限の「ルール」 | 部屋の鍵、許可証 | 許可・拒否のルールを定義 |
| **IAMロール** | 一時的な「権限セット」 | ヘルメット、着ぐるみ | プログラムや他アカウントへの権限貸与 |


# VPC

## Public vs Private

| 種類 | インターネット接続 | 主な用途 | 必須コンポーネント |
| --- | --- | --- | --- |
| **Public** | 直接できる（双方向） | Webサーバー、ALB（負荷分散装置） | インターネットゲートウェイ (IGW) |
| **Private** | 直接できない（外から内への通信不可） | データベース、バックエンド処理 | NATゲートウェイ（外に出る場合のみ） |

# S3

## ストレージクラス

| **ストレージクラス名** | **料金（保存量）** | **可用性** | **最小保存期間** | **特徴と主なユースケース** |
| --- | --- | --- | --- | --- |
| **1. Express One Zone** | **最高** | 99.95% | なし | **超高速。** 1桁ミリ秒の遅延。AI/機械学習や高頻度な計算処理用。 |
| **2. Standard** | **高** | 99.99% | なし | **標準。** 頻繁にアクセスするデータ、Webサイトの画像など。 |
| **3. Intelligent-Tiering** | **中（変動）** | 99.9% | なし | **自動節約。** アクセス頻度に応じてAWSが自動で階層を移動。 |
| **4. Standard-IA** | **中** | 99.9% | 30日 | **低頻度。** 月1回程度のアクセス。バックアップや古いログ。 |
| **5. One Zone-IA** | **中低** | 99.5% | 30日 | **低頻度（1箇所保存）。** 万一消えても再作成できる二次バックアップ。 |
| **6. Glacier Instant Retrieval** | **低** | 99.9% | 90日 | **即時アーカイブ。** 四半期に1度のアクセスだが、即座に必要。 |
| **7. Glacier Flexible Retrieval** | **極低** | 99.99% | 90日 | **柔軟なアーカイブ。** 数分〜数時間で取り出し可。長期バックアップ。 |
| **8. Glacier Deep Archive** | **最安** | 99.99% | 180日 | **長期保存。** 取り出しに半日以上かかる。法令遵守の保管データ。 |


# EMR

## デプロイタイプ

AWSが提供するEMRの形態は、現在大きく3種類ある。

| デプロイタイプ | 特徴 | 向いているケース |
| --- | --- | --- |
| **EMR on EC2** | インスタンスを直接管理。OSレベルのカスタマイズが可能。 | 長時間稼働、既存のHadoop資産の移行、細かいチューニングが必要な場合。 |
| **EMR on EKS** | Kubernetes上でコンテナとして実行。他のアプリとリソースを共有。 | 既にEKSを利用しており、分析基盤もコンテナで統一したい場合。 |
| **EMR Serverless** | サーバー管理不要。ジョブを投げるだけで自動スケーリング。 | インフラ管理を排除したい、断続的なジョブ実行、コスト最適化を優先したい場合。 |

- 要件に合わせて細かい設定をしたい → **EMR on EC2**
- Kubernetesの資産がすでにある → **EMR on EKS**
- インフラ管理は避けてサクッと動かしたい → **EMR Serverless**


## ステートレスのメリット

EMRにおける**クラスターのステートレス化**とは、  
「クラスター（計算サーバー群）をいつでも使い捨て（削除・再作成）にできる状態にすること」を指す。

通常、サーバーの中にデータや設定（メタデータ）を持たせてしまうと、
クラスターを消した瞬間にそれらも消えてしまう。

**「データ本体」と「データの定義情報（メタデータ）」をクラスターの外に切り出す**ことで防ぐことができる。

| 項目 | ステートフル（従来） | ステートレス（EMR推奨） |
| --- | --- | --- |
| **データ保存先** | クラスター内のHDFS | **Amazon S3 (EMRFS)** |
| **メタデータ保存先** | クラスター内DB (MySQL等) | **AWS Glue データカタログ** |
| **クラスター運用** | 24時間365日動かし続ける | **必要な時だけ起動、終われば削除** |
| **コスト** | 高い（アイドル中も課金） | **低い（実行時間のみ課金）** |
| **スポット利用** | 困難（データ消失リスク） | **容易（スポットインスタンスに最適）** |

- 基本S3の（EMRFS）とGlueのデータカタログを使ってステートレス性を確保

# Kinesis

## Data Streams vs Data Firehose

| **比較項目** | **Kinesis Data Streams (KDS)** | **Amazon Data Firehose (KDF)** |
| --- | --- | --- |
| **主な役割** | **リアルタイム処理・分析**（計算や判定） | **データの配信・ロード**（保存や転送） |
| **主な用途** | 不正検知、即時価格更新、複雑な判定 | ログ保存、データレイク構築、SIEM |
| **遅延 (Latency)** | **1秒未満** (超リアルタイム) | **60秒〜900秒** (バッファリング) |
| **データの届け先** | 独自アプリ(EC2/KCL)、Lambda、Flink | **S3, Redshift, OpenSearch, Splunk等** |
| **運用負荷** | シャードの管理（スケーリング）が必要 | **ゼロ** (サーバーレスで完全自動拡張) |
| **データの再利用** | **可能**（複数のアプリで同時に読める） | **不可**（配信先へ一方通行） |
| **データ変換** | 自由自在（独自のロジックを書く） | 簡易的（形式変換やLambdaによる微調整） |
| **一言でいうと** | **「今すぐ何とかしたい」**ときに使う | **「後で使えるように貯めたい」**ときに使う |

- Kinesis Data Streams
  - データをリアルタイムに処理したい
  - リアルタイム性と自由な加工が得意
- Data Firehose
  - データをどこかに運びたい
  - 手軽さと保存（S3などへの転送）のしやすさ○


# Step Functions 

## Parallel vs Map

| 項目 | Parallel (パラレル) | Map (マッピング) |
| --- | --- | --- |
| **実行内容** | **別々**のステップを実行 | **同じ**ステップを繰り返し実行 |
| **入力データ** | 各枝で同じデータを共有（加工可） | **配列データ**（リスト）が必要 |
| **実行数** | 定義した枝の数（固定） | 配列の要素数（動的） |
| **主な目的** | 処理時間の短縮（非同期化） | 大量データの一括処理 |



# データストア

| **項目** | **データレイク (Data Lake)** | **データウェアハウス (DWH)** | **データマート (Data Mart)** |
| --- | --- | --- | --- |
| **役割** | データの「保管庫」 | データの「整理棚」 | データの「陳列棚（専門店）」 |
| **データの状態** | 生データ（Raw Data）そのまま | 整形・加工・構造化されたデータ | 特定の目的用に抽出・集計済み |
| **保存形式** | オブジェクト、ファイル（CSV, JSON, 動画など） | リレーショナル（テーブル形式） | リレーショナル（テーブル形式） |
| **主な利用者** | データサイエンティスト、エンジニア | データアナリスト、ビジネス部門 | 特定部署（営業・マーケなど） |
| **目的** | 将来何かに使うための全データ蓄積 | 全社的な分析、意思決定 | 特定の業務課題の解決 |
| **柔軟性** | 非常に高い（何でも入れられる） | 中程度（定義済みデータのみ） | 低い（特定用途に特化） |